{% extends "::base.html.twig" %}

{% block style %}
	<style>
		.foro>td{
			background-color:transparent !important;
			padding:0px !important;
			vertical-align:middle !important;
		}
		.foro:hover{
			background-color:#f5f5f5;
			cursor:  pointer;
		}
		.foro>td>div{
			padding:10px 15px;
			color: #333;
			vertical-align:middle;
		}
	</style>
{% endblock style %}

{% block menu %}
	{% set active = 'adminmentor' %}
	{% include '::menu.html.twig' %}
{% endblock menu %}

{% block body %}

	<div class="row">
		<div class="col-lg-12">
			<section class="panel">
				<header class="panel-heading">{% trans from "label" %}seguimientos.usuarios.mentor{% endtrans %}</header>
				<div class="panel-body">{% trans from "label" %}descripcion.usuarios.mentor{% endtrans %}</div>
                
                {% if contactos %}
					<table class="table table-striped border-top datatable">
						<thead>
							<tr>
								<th></th>
								<th>{% trans from "label" %}apellido{% endtrans %}</th>
								<th>{% trans from "label" %}nombre{% endtrans %}</th>
								{#<th>{% trans from "label" %}rol{% endtrans %}</th>#}
								<th>{% trans from "label" %}alternativas.estudio{% endtrans %}</th>
								<th>{% trans from "label" %}colegio{% endtrans %}/{% trans from "label" %}universidad{% endtrans %}</th>
								<th class='text-center'>{% trans from "label" %}opciones{% endtrans %}</th>
							</tr>
						</thead>
						<tbody>
							{% for c in contactos %}
								{% set pathUser = path('perfil', {'perfilId': c.id }) %}
								<tr class="foro" id='rel_{{ c.relacionId }}'>
									<td class='href' data-href='{{ pathUser }}'>
										{% set imagen = (c.usuarioImagen) ? c.usuarioImagen ~ '?type=large' : gui_default_img %}
										<div><img src="{{ asset(imagen) }}" alt="" STYLE='width:50px'></div>
									</td>
									<td class='href' data-href='{{ pathUser }}'><div>{{ c.usuarioApellido }}</div></td>
									<td class='href' data-href='{{ pathUser }}'><div>{{ c.usuarioNombre }}</div></td>
									{#<td class='href' data-href='{{ pathUser }}'><div>{{ c.rolNombre|trans({}, 'db') }}</div></td>#}
									<td class='href' data-href='{{ pathUser }}'>
										<div>
										{% if c.estudios is defined %}
											{% for est in c.estudios %}
												- {{ est.nombreCarrera }}<br>
											{% endfor %}
										{% else %}
											{% trans from "label" %}no.hay.alternativas{% endtrans %}
										{% endif %}
											</div>
									</td>
									<td class='href' data-href='{{ pathUser }}'>
										<div>
											{% set colegio = (c.nombreColegio) ? c.nombreColegio : 'no.ha.sido.suministrado'|trans({}, 'label')  %}
											{% set grado = (c.usuarioCursoActual) ? " ("  ~ c.usuarioCursoActual ~ ")" : '' %}
											{{ colegio }}{{ grado }}
										</div>
									</td>
									<td class="text-center">
										<a style='margin:2px; width:90%;' href='{{ pathUser }}' class="btn btn-primary btn-xs">{{ 'ver.perfil'|trans({}, 'label') }}</a>
										
                                        <a href="{{ path("evaluacion360_resultados", {"id": c.id}) }}" class="btn btn-primary btn-xs" style='margin:2px; width:90%;'>{% trans from "label" %}resultados.evaluacion.360{% endtrans %}</a>
                                        <a href="{{ path("disenovida_resultados", {"id": c.id}) }}" class="btn btn-primary btn-xs" style='margin:2px; width:90%;'>{% trans from "label" %}resultados.diseno.vida{% endtrans %}</a>
                                        {% if c.estudios is defined %}
											<a STYLE='margin:2px;width:90%;' class="btn btn-primary btn-xs" data-toggle="modal" href="#myModal{{ c.id }}">{{ 'informe.mercado.laboral'|trans({}, 'label') }}</a>
										{% endif %}	
                                        <a href="{{ path("ponderacion_resultados", {"id": c.id}) }}" class="btn btn-primary btn-xs" style='margin:2px; width:90%;'>{% trans from "label" %}resultados.ponderacion{% endtrans %}</a>
										<br>
										
										<div class="modal fade" id="myModal{{ c.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
											<div class="modal-dialog">
												<div class="modal-content">
													<form action="{{ path('subir_informe_mercado_laboral') }}" method='post' type="post" enctype="multipart/form-data">
														<div class="modal-header">
															<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
															<h4 class="modal-title">{% trans from "label" %}informe.mercado.laboral{% endtrans %}</h4>
														</div>
														<div class="modal-body">
															{% set name =  c.usuarioNombre ~ ' ' ~ c.usuarioApellido %}
															<p>{{ 'subir.informe.mercado.laboral.de.alternativas.de.estudio.de.%name%'|trans({'%name%': name}, 'label') }}</p>
															<input type='hidden' name='usuario' value='{{ c.id }}' class="form-control" />
															<div STYLE='display:inline;'>
																<input required type='file' name='informeml' value='{{ c.id }}' class="form-control" STYLE='width:60%' accept="application/pdf"/>
															</div>
														</div>
														<div class="modal-footer">
															<button data-dismiss="modal" class="btn btn-default" type="button">{% trans from "label" %}cerrar{% endtrans %}</button>
															<button class="btn btn-success" type="submit">{% trans from "label" %}subir.informe{% endtrans %}</button>
														</div>
													</form>
												</div>
											</div>
										</div>
						
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				{% else %}
					<div class="panel-body" STYLE='text-align:center;'>
                        {% trans from "label" %}no.hay.usuarios.para.seguimiento{% endtrans %}
					</div>
				{% endif %}
			</section>
			
			<hr>
		</div>
	</div>
{% endblock body %}

{% block script %}
    
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script type="text/javascript" src="{{ asset('assets/data-tables/jquery.dataTables.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/data-tables/DT_bootstrap.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/vocationet/datatables.js') }}"></script>
    <script type="text/javascript" src="{{ asset('rateit/src/jquery.rateit.js') }}"></script>

    <script>
		$('.table').on('click', '.href', function(){
			window.location = $(this).data('href');
		});
    </script>
{% endblock script%}
